# NOC services description
---
product: "noc"
services:
  nsqlookupd:
    description: NSQ lookup daemon
    level: system
    port: 4161

  nsqd:
    description: NSQD daemon
    level: system
    port: 4151

  nsqadmin:
    description: NSQ Admin interface
    level: system
    port: 4171

  postgres:
    description: PostgreSQL server
    level: system
    port: 5432

  mongod:
    description: Mongod server
    level: system
    port: 27017

  influxdb:
    description: InfluxDB server
    level: system
    port: 8086

  nginx:
    description: Nginx server
    level: system
    port: 443
    require_cert: true

  grafana:
    description: Graphana server
    level: system
    port: 8002

  classifier:
    description: Classifier
    level: pool

  correlator:
    description: Correlator
    level: global

  fmwriter:
    description: FMWriter
    level: pool

  omap:
    description: OMap
    level: global

  ping:
    description: Ping
    level: pool

  syslogcollector:
    description: Syslog Collector
    level: pool

  trapcollector:
    description: SNMP Trap Collector
    level: pool

  web:
    description: Legacy web interface
    level: global
    required_assets:
      - web

  card:
    description: Card web interface
    level: global
    required_assets:
      - card

  sae:
    description: Service activation engine
    level: global

  dev:
    description: Development node
    level: global

  notebook:
    description: Notebook
    level: global

  activator:
    description: Activator service
    level: pool

  discovery:
    description: Service and resource discovery
    level: pool

  scheduler:
    description: Scheduler and Cron
    level: global

  login:
    description: Login
    level: global
    required_assets:
      - login

  mailsender:
    description: SMTP mail sender
    level: global

config:
  noc:
    installation_name:
      label: Installation name
      type: str
      default: Unconfigured installation

    timezone:
      label: Time Zone
      type: str
      default: Europe/Moscow

    rpc_choose_services:
      label: Choose RPC services
      type: int
      default: 3

    rpc_retry_timeout:
      label: RPC Retry timeout
      type: str
      default: 0.1,0.5,1,3,10,30

  correlator:
    tt_escalation_limit:
      label: TT escalation limin (tt/minute)
      type: int
      default: 10

  classifier:
    lookup_solution:
      label: Lookup solution
      type: str
      default: noc.services.classifier.xrulelookup.XRuleLookup

    default_interface_profile:
      label: Default interface profile
      type: str
      default: default

  syslogcollector:
    listen_syslog:
      label: Listen SYSLOG
      type: str
      default: 0.0.0.0:514

    buffer_size:
      label: Message buffer size
      type: int
      default: 100000

  trapcollector:
    listen_traps:
      label: Listen SNNP Traps
      type: str
      default: 0.0.0.0:162

    buffer_size:
      label: Message buffer size
      type: int
      default: 100000

  sae:
    db_threads:
      label: DB threads
      type: int
      default: 4

  activator:
    script_threads:
      label: Script threads
      type: int
      default: 20

    tos:
      label: IP ToS mark
      type: int
      default: 0

  discovery:
    max_threads:
      label: Discovery threads
      type: int
      default: 10

  scheduler:
    max_threads:
      label: Scheduler threads
      type: int
      default: 10

  ping:
    tos:
      label: IP ToS mark
      type: int
      default: 0

    buffer_size:
      label: Message buffer size
      type: int
      default: 100000

    max_packets:
      label: Maximum number of packets to check
      type: int
      default: 3

  card:
    language:
      label: Translation language
      type: str
      default: en

  login:
    language:
      label: Translation language
      type: str
      default: en

    method:
      label: Authentication method
      type: str
      default: noc.services.login.backends.local.LocalBackend

    session_ttl:
      label: Session TTL (days)
      type: int
      default: 7

    radius_server:
      label: RADIUS Server
      type: str

    radius_secret:
      label: RADIUS Secret
      type: str

    ldap_server:
      label: LDAP Server
      type: str

  mailsender:
    smtp_server:
      label: SMTP server address
      type: str

    smtp_port:
      label: SMTP server port
      type: int
      default: 25

    use_tls:
      label: Use SMTP TLS
      type: bool
      default: false

    helo_hostname:
      label: SMTP HELO hostname
      type: str
      default: noc

    from_address:
      label: Email sender address
      type: str
      default: noc@example.com

    smtp_user:
      label: SMTP User
      type: str

    smtp_password:
      label: SMTP Password
      type: str

  mongod:
    mongod_journal_directory:
      type: str
      label: Mongo journal directory
      default: /var/lib/mongo/journal

    mongod_data_directory:
      type: str
      label: Mongo journal directory
      default: /var/lib/mongo/

  influxdb:
    influxdb_wal_directory:
      type: str
      label: InfluxDB Wal directory
      default: /var/lib/influxdb/wal/

    influxdb_data_directory:
      type: str
      label: InfluxDB Data directory
      default: /var/lib/influxdb/data/

  postgres:
    postgres_wal_directory:
      type: str
      label: Postgresql wal directory
      default: /var/lib/postgresql/9.4/main/pg_xlog

    postgres_data_directory:
      type: str
      label: Postgresql data directory
      default: /var/lib/postgresql/9.4/main/

  web:
    language:
      label: Translation language
      type: str
      default: en
