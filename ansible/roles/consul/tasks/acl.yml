---
# File: tasks/acl.yml - ACL tasks for Consul

- name: ACL bootstrap configuration
  template:
    src: config_acl.json.j2
    dest: "{{ consul_config_dir }}/{{ item }}/config_acl.json"
  with_items:
  - bootstrap
  - client
  - server
  notify:
    - restart consul

- name: ACL policy configuration
  template:
    src: config_acl_policy.hcl.j2
    dest: "{{ consul_config_dir }}/{{ item }}/config_acl_policy.hcl"
  with_items:
  - bootstrap
  - client
  - server
  notify:
    - restart consul