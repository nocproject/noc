[[inputs.procstat]]
pattern = "noc-correlator"
  fielddrop=["involuntary_context_switches", "voluntary_context_switches", "pid", "cpu_time_guest","cpu_time_guest_nice","cpu_time_idle","cpu_time_iowait","cpu_time_irq","cpu_time_nice","cpu_time_soft_irq","cpu_time_steal","cpu_time_stolen"]

[[inputs.httpjson]]
  name = "noc-correlator"
  servers = [
{% for service in noc_config.services -%}
    {% if "correlator" in service -%}
        {% for host in noc_config.services[service] -%}
            {% if ansible_host in host -%}
"http://{{host}}/mon/",
            {%- endif %}
        {%- endfor %}
    {%- endif %}
{%- endfor %}
  ]
  method = "GET"
  tag_keys = ["service", "instance"]
  tagexclude = ["server"]