# nginx role
---
- include: "os/Debian/main.yml"
  when: ansible_distribution == "Debian"

- name: Setup nginx
  template: src="etc/nginx/conf.d/noc.conf.j2" dest="{{ nginx_conf_path }}"
  notify: restart nginx

- name: Install packages
  pip: >
    chdir="{{noc_root}}"
    executable="{{noc_root}}/bin/pip"
    requirements="requirements/web.txt"
    virtualenv="{{noc_root}}"
    extra_args="--trusted-host cdn.nocproject.org --find-links https://cdn.nocproject.org/pkg/simple/ --allow-all-external --upgrade"
  when: "'web' not in group_names"
