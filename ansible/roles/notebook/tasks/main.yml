---
- include: "os/Debian/main.yml"
  when: ansible_distribution == "Debian"

- name: Install packages
  pip: >
    chdir="{{noc_root}}"
    executable="{{noc_root}}/bin/pip"
    requirements="requirements/notebook.txt"
    virtualenv="{{noc_root}}"
    extra_args="--trusted-host cdn.nocproject.org --find-links https://cdn.nocproject.org/pkg/simple/ --allow-all-external --upgrade"

- name: Create notebooks directory
  file: path="{{ noc_root }}/var/notebooks" owner="{{ noc_user }}" mode=0700 state=directory

- name: Set up config
  template: src="etc/notebook.py.j2" dest="{{ noc_root }}/etc/notebook.py"
