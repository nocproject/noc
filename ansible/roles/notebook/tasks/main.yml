---
- include: "os/Debian/main.yml"
  when: ansible_distribution == "Debian"

- name: Install packages
  pip: >
    chdir="{{noc_root}}"
    executable="{{noc_root}}/bin/pip"
    requirements="requirements/notebook.txt"
    virtualenv="{{noc_root}}"
    extra_args="--trusted-host cdn.nocproject.org --find-links https://cdn.nocproject.org/pkg/simple/ --allow-all-external --upgrade"

- name: Create notebook directories
  file: path="{{ noc_root }}/{{ item }}" owner="{{ noc_user }}" mode=0700 state=directory
  with_items:
    - etc/jupyter
    - var/notebooks
    - var/jupyter
    - var/jupyter/runtime

- name: Set up configs
  template: src="etc/jupyter/jupyter_notebook_config.py.j2" dest="{{ noc_root }}/etc/jupyter/jupyter_notebook_config.py"
