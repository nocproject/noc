---
- name: Enable the PostgreSQL repository RHEL
  yum: name=http://yum.postgresql.org/9.4/redhat/rhel-{{ ansible_distribution_major_version }}-{{ ansible_architecture }}/pgdg-redhat94-9.4-2.noarch.rpm state=present

- name: "Install PostgreSQL"
  yum: name="{{item}}" state=present update_cache=yes
  with_items:
    - postgresql-server
    - postgresql-contrib
    - postgresql-plpython
    - python-psycopg2

- name: PostgreSQL init db
  command: postgresql-setup initdb creates=/var/lib/pgsql/data/postgresql.conf

- name: Set config paths
  set_fact:
    postgresql_conf_path: "/var/lib/pgsql/data/postgresql.conf"
    postgresql_hba_path: "/var/lib/pgsql/data/pg_hba.conf"
