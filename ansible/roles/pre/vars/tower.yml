grafana_pg_password: "{{noc_config['config'].get('grafana-global-%s' % ansible_hostname, {}).get('password', 'grafana')}}"
memcached_max_clients: "{{noc_config['config'].get('memcached-global-%s' % ansible_hostname, {}).get('max_clients', '1024')| int | abs }}"
memcached_max_files: "{{(noc_config['config'].get('memcached-global-%s' % ansible_hostname, {}).get('max_clients', 1024) * 1.1 )| int | abs }}"
memcached_max_memory: "{{noc_config['config'].get('memcached-global-%s' % ansible_hostname, {}).get('max_memory', '64') | int | abs}}"
pgbouncer_max_clients: "{{noc_config['config'].get('pgbouncer-global-%s' % ansible_hostname, {}).get('pgbouncer_max_clients', '3000') | int | abs}}"
pgbouncer_max_db_connection: "{{(noc_config['config'].get('pgbouncer-global-%s' % ansible_hostname, {}).get('pgbouncer_max_clients /10', '300')| int | abs )}}"
pgbouncer_max_files: "{{(noc_config['config'].get('pgbouncer-global-%s' % ansible_hostname, {}).get('pgbouncer_max_clients', 3000) * 1.1 )| int | abs}}"
web_weight: "{{noc_config['config'].get('web-global-%s' % ansible_hostname, {}).get('weight', 1)}}"
login_weight: "{{noc_config['config'].get('login-global-%s' % ansible_hostname, {}).get('weight', 1)}}"
card_weight: "{{noc_config['config'].get('card-global-%s' % ansible_hostname, {}).get('weight', 1)}}"
django_key: "{{ lookup('django_key', tower_data + '/noc/secret.key') }}"
supervisorctl_key: "{{ lookup('supervisorctl_key', tower_data + '/noc/supervisorctl.key') }}"
postgres_master: "{% for n in groups['svc-postgres-master'] %}{{n}}{% endfor %}"
mongo_key: "{{ lookup('mongo_key', tower_data + '/mongo/mongo.key') }}"
nsq_max_messages_in_memory: "{{ noc_config['config'].get('nsqd-global-%s' % ansible_hostname, {}).get('max_messages_in_memory', 10000) }}"
memcache_address: "{{ noc_config['config'].get('memcached-global-%s' % ansible_hostname, {}).get('listen', '127.0.0.1:11211')}}"
nginx_json_logging: "{{noc_config['config'].get('nginx-global-%s' % ansible_hostname, {}).get('logging')}}"
nginx_http_redirect_enabled: "{{noc_config['config'].get('nginx-global-%s' % ansible_hostname, {}).get('http_redirect')}}"
influx_addr: "{{ noc_config['config'].get('influxdb-global-%s' % ansible_hostname, {}).get('listen', '127.0.0.1:8086')}}"
postgres_max_connections: "{{ noc_config['config'].get('postgres-global-%s' % ansible_hostname, {}).get('postgres_max_clients', 302) }}"
postgres_host: "{{ noc_config.services.postgres.0.split(':')[0] }}"
postgres_host_port: "{{ noc_config.services.postgres.0 }}"
influx_host: "http://{{ noc_config.services.influxdb.0 }}"
mongo_hosts: "{{ noc_config.services.mongod | join(',')}}"
grafana_http_port: "{{ noc_config.services.grafana.0.split(':')[1] }}"
keepalived_password: "{{noc_config['config'].get('keepalived-global-%s' % ansible_hostname, {}).get('password', 'noc')}}"
keepalived_virtual_ip: "{{noc_config['config'].get('keepalived-global-%s' % ansible_hostname, {}).get('virtual_ip', '192.168.1.210')}}"
login_methods: "{{noc_config['config'].get('login-global-%s' % ansible_hostname, {}).get('methods', 'local')}}"