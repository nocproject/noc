pidfile /var/run/redis/{{ redis_daemon }}.pid
port 6379
bind 127.0.0.1

timeout {{ noc_config["config"].get("redis-global-%s" % ansible_hostname, {}).get("redis_timeout", 300) }}

loglevel {{ redis_loglevel }}
logfile {{ redis_logfile }}

# To enable logging to the system logger, just set 'syslog-enabled' to yes,
# and optionally update the other syslog parameters to suit your needs.
# syslog-enabled no
# syslog-ident redis
# syslog-facility local0

{% for save in redis_save %}
save {{ save }}
{% endfor %}

rdbcompression {{ redis_rdbcompression }}
dbfilename {{ redis_dbfilename }}
dir {{ noc_config["config"].get("redis-global-%s" % ansible_hostname, {}).get("redis_db_dir", "/var/lib/redis") }}

maxclients 10000

maxmemory {{ noc_config["config"].get("redis-global-%s" % ansible_hostname, {}).get("redis_max_memory", 0) }}
maxmemory-policy {{ redis_maxmemory_policy }}
maxmemory-samples {{ redis_maxmemory_samples }}

appendonly {{ redis_appendonly }}
appendfsync {{ redis_appendfsync }}
no-appendfsync-on-rewrite no
