# mongod.conf for MongoDB 7 and later
# See https://docs.mongodb.com/manual/reference/configuration-options/

storage:
  dbPath: {{ mongo_db_path }}
  wiredTiger:
    engineConfig:
      directoryForIndexes: true

systemLog:
  verbosity: 0
{% if mongod_logging_destination == "syslog" %}
  destination: syslog
{% else %}
  destination: file
  logAppend: true
  path: {{ mongo_log_path }}
{% endif %}

net:
  port: 27017
  bindIp: 127.0.0.1,{{ inventory_hostname }}

processManagement:
  fork: {{ mongo_fork | lower }}

security:
  keyFile: {{ mongo_dir }}/mongo.key
  clusterAuthMode: keyFile
  authorization: enabled

replication:
  replSetName: {{ mongod_rs }}
