<table class="table table-condensed table-hover">
<tbody>
<tr>
    <th colspan="2" class="{{ {'up': 'success', 'alarm': 'warning', 'down': 'danger'}[current_state] }}">
        {{ object | managed_object_title }}
        <span style="float: right">
        {% if current_state == "down" %}Down{% else %}<i class="fa fa-check"></i>Up{% endif %}{%if current_start %}: {{ current_duration }} ({{ current_start | timestamp }}){% endif %}
        </span>
    </th>
</tr>
<tr>
    <th scope="row" class="col-sm-1">Container</th>
    <td>
        {% for p in container_path %}
        {% if not loop.first %}&gt;{% endif %}
        {{ p.name }}
        {% endfor %}
    </td>
</tr>
<tr>
    <th scope="row">Administrative domain</th>
    <td>{{ object.administrative_domain.name }}</td>
</tr>
<tr>
    <th scope="row">Segment</th>
    <td>{% if segment %}{{ segment.name }}{% endif %}</td>
</tr>
<tr>
    <th scope="row">Model</th>
    <td>{{ platform }}</td>
</tr>
{% if service_summary %}
<tr>
    <th scope="row">Services</th>
    <td>
        {{ service_summary | glyph_summary }}
    </td>
</tr>
{% endif %}
<tr>
    <th scope="row">IP</th>
    <td>{{ address }}</td>
</tr>
<tr>
    <th scope="row">MAC</th>
    <td>{{ macs }}</td>
</tr>
<tr {% if firmware_status in ('n', 'd') %}class="warning"{% endif %}>
    <th scope="row">Version</th>
    <td>{% if version %}{{ version }}
            {% if firmware_recommended != version and firmware_recommended %}
            (Recommended: {{ firmware_recommended }})
            {% endif %}
        {% endif %}
    </td>
</tr>
<tr>
    <th scope="row">Description</th>
    <td>{% if description %}{{ description }}{% endif %}</td>
</tr>
<tr>
    <th scope="row">Service Range</th>
    <td>N/A</td>
</tr>
<tr>
    <th scope="row">L2 Terminator</th>
    <td>
        {% if l2_terminators %}
        <table class="table table-condensed table-hover">
            <thead>
                <th>Name</th>
                <th>Address</th>
                <th>Model</th>
            </thead>
            <tbody>
                {% for t in l2_terminators %}
                <tr>
                    <td><a href="/api/card/view/managedobject/{{ t.id }}/">{{ t.name }}</a></td>
                    <td>{{ t.address }}</td>
                    <td>{{ t.platform }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </td>
</tr>
<tr>
    <th scope="row">L3 Terminator</th>
    <td>N/A</td>
</tr>
<tr>
    <th scope="row">Neighbors</th>
    <td>
        {% if links %}
            <table class="table table-condensed hable-hover">
                <thead>
                    <th class="col-sm-1">Local port</th>
                    <th class="col-sm-4">Remote object</th>
                    <th class="col-sm-1">Remote port</th>
                </thead>
                <tbody>
                    {% for l in links %}
                        <tr class="{{ {'up': 'success', 'alarm': 'warning', 'down': 'danger'}[l["remote_status"]] }}">
                            <td>
                                {% if l["role"] == "uplink" %}
                                    <i class="fa fa-arrow-circle-up" title="Uplink"></i>
                                {% else %}
                                    <i class="fa fa-arrow-circle-down" title="Downlink"></i>
                                {% endif %}
                                {% for i in l["local_interface"] %}
                                {{ i.name }}{% if not loop.first %}, {% endif %}
                                {% endfor %}
                            </td>
                            <td>
                                <a href="/api/card/view/managedobject/{{ l["remote_object"].id }}/">
                                    {{ l["remote_object"] | managed_object_title }}
                                </a>
                            </td>
                            <td>
                                {% for i in l["remote_interface"] %}
                                {{ i.name }}{% if not loop.first %}, {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </td>
</tr>
<tr>
    <th scope="row">TT</th>
    <td>N/A</td>
</td>
{% if alarms %}
<tr>
    <th scope="row">Alarms</th>
    <td>
        <table class="table table-condensed">
            <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>Duration</th>
                    <th>Subject</th>
                </tr>
            </thead>
            <tbody>
                {% for a in alarms %}
                <tr>
                    <td><a href="/api/card/view/alarm/{{ a["id"] }}/">{{ a["timestamp"] | timestamp}}</a></td>
                    <td>{{ a["duration"] }}</td>
                    <td>{{ a["subject"] }}</td>
                </td>
                {% endfor %}
            </tbody>
        </table>
    </td>
<td>
{% endif %}
</tbody>
</table>
<table class="table table-condensed table-hover">
    <thead>
        <th class="col-sm-1">Port</th>
        <th class="col-sm-1">Admin/Oper</th>
        <th class="col-sm-1">Speed/Duplex</th>
        <th class="col-sm-1">VLAN</th>
        <th class="col-sm-1">Errors</th>
        <th class="col-sm-1">Status</th>
        <th>Service</th>
    </thead>
    <tbody>
        {% for i in interfaces %}
            <tr>
                <td>{{ i["name"] }}</td>
                <td{% if not i["oper_status"] %} class="danger"{% endif %}>
                    {{ {True: "<i class='text-success fa fa-circle' title='Admin Up'></i>", False: "<i class='text-danger fa fa-circle-o' title='Admin Down'></i>"}[i["admin_status"]] }}/
                    {{ {True: "<i class='text-success fa fa-circle' title='Oper Up'></i>", False: "<i class='text-danger fa fa-circle-o' title='Oper Down'></i>"}[i["oper_status"]] }}
                </td>
                <td{% if not i["full_duplex"]%} class="danger"{% endif %}>
                    {% if i["oper_status"] %}
                        {{ i["speed"] }}M/{{ {True: "Full", False: "Half"}[i.full_duplex] }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if i["untagged_vlan"] %}U: {{ i["untagged_vlan"] }}{% endif %}
                    {% if i["tagged_vlans"] %}T: {{ i["tagged_vlans"] }}{% endif %}
                </td>
                <td></td>
                {% if i["service"] %}
                <td>
                    {{ i["service"].logical_status | logical_status }}<br>
                    <span class="small">{{ i["service"].stage_name }}</span>
                </td>
                <td>
                    <a href="/api/card/view/service/{{ i["service"].id }}/">{{ i["service"].order_id }}</a>:
                    {{ i["service"].subscriber.name }}
                    {% if i["service_summary"] %}
                        <span class="pull-right">
                            {{ i["service_summary"] | glyph_summary }}
                        </span>
                    {% endif %}
                    {% if i["service"].address %}
                    <br/>
                    <span class="small">{{ i["service"].address }}</span>
                    {% endif %}
                </td>
                {% else %}
                <td></td>
                <td>{{ i["description"] }}</td>
                {% endif %}
            <tr>
        {% endfor %}
    </tbody>
</table>
